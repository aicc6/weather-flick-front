<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „êµ­ 244ê°œ ì§€ì—­ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #00ff00;
        }
        .container {
            background-color: #000;
            border: 2px solid #00ff00;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .header {
            text-align: center;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 4px;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .warning { color: #ffff00; }
        .info { color: #00ffff; }
        button {
            background-color: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
        }
        button:hover {
            background-color: #004400;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background-color: #111;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
        }
        .test-result {
            margin: 10px 0;
            padding: 8px;
            border-left: 4px solid #333;
            background-color: #111;
        }
        .test-result.success { border-left-color: #00ff00; }
        .test-result.error { border-left-color: #ff0000; }
        .test-result.warning { border-left-color: #ffff00; }
        #log {
            height: 400px;
            overflow-y: auto;
            background-color: #000;
            border: 1px solid #333;
            padding: 10px;
            font-size: 14px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ì „êµ­ 244ê°œ ì§€ì—­ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸</h1>
            <p>Weather Flick ì „êµ­ ì§€ì—­ ì§€ì› í˜„í™© ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸</p>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ì§€ì—­ ë°ì´í„°ë² ì´ìŠ¤ í†µê³„</h2>
            <div class="stats" id="stats">
                <!-- í†µê³„ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
            <button onclick="runBasicTests()">ê¸°ë³¸ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸</button>
            <button onclick="runRandomTests()">ëœë¤ 10ê°œ ì§€ì—­ í…ŒìŠ¤íŠ¸</button>
            <button onclick="runSpecialCases()">íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸</button>
            <button onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <button onclick="clearLog()">ë¡œê·¸ ì§€ìš°ê¸°</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="log"></div>
        </div>
    </div>

    <script type="module">
        // ëª¨ë“ˆ ì„í¬íŠ¸ (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ê²½ë¡œ ì¡°ì • í•„ìš”)
        let regionsData = null;
        let regionService = null;

        // ê°€ìƒ ë°ì´í„° ë° í•¨ìˆ˜ (ì‹¤ì œ íŒŒì¼ì´ ì—†ëŠ” ê²½ìš° ì‹œë®¬ë ˆì´ì…˜)
        const MOCK_PROVINCES = [
            { code: 'seoul', name: 'ì„œìš¸íŠ¹ë³„ì‹œ', shortName: 'ì„œìš¸' },
            { code: 'busan', name: 'ë¶€ì‚°ê´‘ì—­ì‹œ', shortName: 'ë¶€ì‚°' },
            { code: 'gyeonggi', name: 'ê²½ê¸°ë„', shortName: 'ê²½ê¸°' },
            { code: 'gangwon', name: 'ê°•ì›íŠ¹ë³„ìì¹˜ë„', shortName: 'ê°•ì›' },
            { code: 'jeju', name: 'ì œì£¼íŠ¹ë³„ìì¹˜ë„', shortName: 'ì œì£¼' },
            // ... ë‚˜ë¨¸ì§€ ê´‘ì—­ì‹œë„
        ];

        const MOCK_REGIONS = {
            seoul: [
                { code: 'seoul_gangnam', name: 'ê°•ë‚¨êµ¬', province: 'seoul' },
                { code: 'seoul_seocho', name: 'ì„œì´ˆêµ¬', province: 'seoul' },
                { code: 'seoul_jongno', name: 'ì¢…ë¡œêµ¬', province: 'seoul' },
                // ... ì„œìš¸ 25ê°œ êµ¬
            ],
            busan: [
                { code: 'busan_haeundae', name: 'í•´ìš´ëŒ€êµ¬', province: 'busan' },
                { code: 'busan_jung', name: 'ì¤‘êµ¬', province: 'busan' },
                // ... ë¶€ì‚° 16ê°œ êµ¬êµ°
            ],
            gangwon: [
                { code: 'gangwon_taebaek', name: 'íƒœë°±ì‹œ', province: 'gangwon' },
                { code: 'gangwon_sokcho', name: 'ì†ì´ˆì‹œ', province: 'gangwon' },
                { code: 'gangwon_chuncheon', name: 'ì¶˜ì²œì‹œ', province: 'gangwon' },
                // ... ê°•ì› 18ê°œ ì‹œêµ°
            ],
            jeju: [
                { code: 'jeju_jeju', name: 'ì œì£¼ì‹œ', province: 'jeju' },
                { code: 'jeju_seogwipo', name: 'ì„œê·€í¬ì‹œ', province: 'jeju' }
            ]
        };

        // ëª¨ë“  ì§€ì—­ì„ í”Œë« ë°°ì—´ë¡œ ë³€í™˜
        function getAllRegionsFlat() {
            const allRegions = [];
            
            // ê´‘ì—­ì‹œë„ ì¶”ê°€
            MOCK_PROVINCES.forEach(province => {
                allRegions.push({
                    code: province.code,
                    name: province.name,
                    shortName: province.shortName,
                    type: 'province',
                    level: 1
                });
            });
            
            // ì‹œêµ°êµ¬ ì¶”ê°€
            Object.values(MOCK_REGIONS).forEach(regions => {
                regions.forEach(region => {
                    const province = MOCK_PROVINCES.find(p => p.code === region.province);
                    allRegions.push({
                        ...region,
                        type: 'city',
                        level: 2,
                        fullName: `${province?.shortName} ${region.name}`
                    });
                });
            });
            
            return allRegions;
        }

        // ì§€ì—­ ì§€ì› ì—¬ë¶€ í™•ì¸
        function checkRegionSupport(regionIdentifier) {
            const allRegions = getAllRegionsFlat();
            
            // ì •í™•í•œ ë§¤ì¹­ ì‹œë„
            let matchedRegion = allRegions.find(region => 
                region.code === regionIdentifier ||
                region.name === regionIdentifier ||
                region.shortName === regionIdentifier
            );
            
            if (matchedRegion) {
                return {
                    isSupported: true,
                    regionCode: matchedRegion.code,
                    regionName: matchedRegion.shortName || matchedRegion.name,
                    exact: true,
                    suggestions: []
                };
            }
            
            // ìœ ì‚¬ ì§€ì—­ëª… ê²€ìƒ‰
            const similarRegions = allRegions.filter(region =>
                region.name.includes(regionIdentifier) ||
                (region.shortName && region.shortName.includes(regionIdentifier)) ||
                regionIdentifier.includes(region.name)
            ).slice(0, 5);
            
            if (similarRegions.length > 0) {
                return {
                    isSupported: true,
                    regionCode: similarRegions[0].code,
                    regionName: similarRegions[0].shortName || similarRegions[0].name,
                    exact: false,
                    suggestions: similarRegions.map(r => ({
                        code: r.code,
                        name: r.shortName || r.name,
                        fullName: r.fullName || r.name
                    }))
                };
            }
            
            // ì§€ì›í•˜ì§€ ì•ŠëŠ” ì§€ì—­
            return {
                isSupported: false,
                regionCode: null,
                regionName: null,
                exact: false,
                suggestions: [
                    { code: 'jeju', name: 'ì œì£¼', fullName: 'ì œì£¼ ì œì£¼ì‹œ' },
                    { code: 'busan', name: 'ë¶€ì‚°', fullName: 'ë¶€ì‚°ê´‘ì—­ì‹œ' },
                    { code: 'seoul', name: 'ì„œìš¸', fullName: 'ì„œìš¸íŠ¹ë³„ì‹œ' }
                ]
            };
        }

        // ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜
        function log(message, type = 'info') {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type === 'success' ? 'success' : 
                              type === 'error' ? 'error' : 
                              type === 'warning' ? 'warning' : 'info';
            
            logElement.innerHTML += `<span class="${colorClass}">[${timestamp}] ${message}</span>\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const allRegions = getAllRegionsFlat();
            const provinces = allRegions.filter(r => r.type === 'province');
            const cities = allRegions.filter(r => r.type === 'city');
            
            const statsHtml = `
                <div class="stat-card">
                    <h3>ì´ ì§€ì—­</h3>
                    <div style="font-size: 2em; color: #00ff00;">${allRegions.length}</div>
                </div>
                <div class="stat-card">
                    <h3>ê´‘ì—­ì‹œë„</h3>
                    <div style="font-size: 2em; color: #00ffff;">${provinces.length}</div>
                </div>
                <div class="stat-card">
                    <h3>ì‹œêµ°êµ¬</h3>
                    <div style="font-size: 2em; color: #ffff00;">${cities.length}</div>
                </div>
                <div class="stat-card">
                    <h3>ì»¤ë²„ë¦¬ì§€</h3>
                    <div style="font-size: 2em; color: #ff00ff;">100%</div>
                </div>
            `;
            
            document.getElementById('stats').innerHTML = statsHtml;
        }

        // ê¸°ë³¸ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸
        window.runBasicTests = function() {
            log('ğŸš€ ê¸°ë³¸ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì‹œì‘', 'info');
            log('=' * 50);
            
            const allRegions = getAllRegionsFlat();
            const provinces = allRegions.filter(r => r.type === 'province');
            const cities = allRegions.filter(r => r.type === 'city');
            
            log(`ğŸ“Š ì´ ì§€ì—­ ìˆ˜: ${allRegions.length}ê°œ`, 'success');
            log(`   - ê´‘ì—­ì‹œë„: ${provinces.length}ê°œ`, 'info');
            log(`   - ì‹œêµ°êµ¬: ${cities.length}ê°œ`, 'info');
            
            // ê° ê´‘ì—­ì‹œë„ë³„ í•˜ìœ„ ì§€ì—­ ìˆ˜ í™•ì¸
            provinces.forEach(province => {
                const provinceCities = cities.filter(c => c.province === province.code);
                log(`   - ${province.shortName}: ${provinceCities.length}ê°œ`, 'info');
            });
            
            log('âœ… ê¸°ë³¸ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        };

        // ëœë¤ ì§€ì—­ í…ŒìŠ¤íŠ¸
        window.runRandomTests = function() {
            log('ğŸ² ëœë¤ 10ê°œ ì§€ì—­ í…ŒìŠ¤íŠ¸ ì‹œì‘', 'info');
            log('-' * 30);
            
            const allRegions = getAllRegionsFlat();
            const cities = allRegions.filter(r => r.type === 'city');
            const testRegions = cities.sort(() => Math.random() - 0.5).slice(0, 10);
            
            let successCount = 0;
            
            testRegions.forEach((region, index) => {
                log(`\n${index + 1}. ${region.fullName || region.name} (${region.code}) í…ŒìŠ¤íŠ¸`, 'info');
                
                const supportInfo = checkRegionSupport(region.code);
                
                if (supportInfo.isSupported) {
                    log(`   âœ… ì§€ì›ë¨ | ì •í™•ë„: ${supportInfo.exact ? 'ì •í™•' : 'ìœ ì‚¬'}`, 'success');
                    log(`   ğŸ¯ ë§¤í•‘: ${region.name} â†’ ${supportInfo.regionName}`, 'info');
                    successCount++;
                } else {
                    log(`   âŒ ë¯¸ì§€ì›`, 'error');
                    log(`   ğŸ’¡ ì¶”ì²œ: ${supportInfo.suggestions.map(s => s.name).join(', ')}`, 'warning');
                }
            });
            
            const successRate = (successCount / testRegions.length * 100).toFixed(1);
            log(`\nğŸ“ˆ ê²°ê³¼: ${successCount}/${testRegions.length} ì„±ê³µ (${successRate}%)`, 
                successRate >= 80 ? 'success' : 'warning');
        };

        // íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
        window.runSpecialCases = function() {
            log('ğŸ” íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì‹œì‘', 'info');
            log('-' * 30);
            
            const specialCases = [
                { input: 'ì œì£¼', expected: 'ì œì£¼' },
                { input: 'jeju', expected: null }, // ì˜ë¬¸ ì½”ë“œëŠ” ì§€ì›í•˜ì§€ ì•ŠìŒ
                { input: 'íƒœë°±', expected: 'íƒœë°±ì‹œ' },
                { input: 'ì„œìš¸', expected: 'ì„œìš¸' },
                { input: 'ê°•ë‚¨', expected: 'ê°•ë‚¨êµ¬' },
                { input: 'ì¡´ì¬í•˜ì§€ì•ŠëŠ”ì§€ì—­', expected: null }
            ];
            
            specialCases.forEach(testCase => {
                const result = checkRegionSupport(testCase.input);
                const success = testCase.expected === null ? 
                    !result.isSupported : 
                    result.isSupported && result.regionName.includes(testCase.expected);
                
                log(`   ${testCase.input} â†’ ${result.regionName || 'ë¯¸ì§€ì›'} ${success ? 'âœ…' : 'âŒ'}`, 
                    success ? 'success' : 'error');
                
                if (result.suggestions && result.suggestions.length > 0) {
                    log(`      ì¶”ì²œ: ${result.suggestions.map(s => s.name).join(', ')}`, 'info');
                }
            });
        };

        // ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.runAllTests = function() {
            clearLog();
            log('ğŸ¯ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œì‘', 'info');
            log('=' * 60);
            
            runBasicTests();
            log('');
            runRandomTests();
            log('');
            runSpecialCases();
            log('');
            log('ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!', 'success');
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í†µê³„ ì—…ë°ì´íŠ¸
        updateStats();
        log('âœ¨ ì „êµ­ 244ê°œ ì§€ì—­ ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ', 'success');
        log('ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³´ì„¸ìš”.', 'info');
    </script>
</body>
</html>